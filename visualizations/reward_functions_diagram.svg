<svg viewBox="0 0 900 600" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="900" height="600" fill="#ffffff" rx="10" ry="10"/>
  
  <!-- Title -->
  <text x="450" y="50" font-family="Arial" font-size="24" text-anchor="middle" font-weight="bold" fill="#444444">Reward Functions Mechanism</text>
  
  <!-- Input Box -->
  <rect x="50" y="100" width="200" height="100" fill="#d1e7ff" stroke="#0066cc" stroke-width="2" rx="5" ry="5"/>
  <text x="150" y="125" font-family="Arial" font-size="16" text-anchor="middle" font-weight="bold">Input Prompt</text>
  <text x="150" y="155" font-family="Arial" font-size="12" text-anchor="middle" font-style="italic">Question about whether</text>
  <text x="150" y="175" font-family="Arial" font-size="12" text-anchor="middle" font-style="italic">two mentions are</text>
  <text x="150" y="195" font-family="Arial" font-size="12" text-anchor="middle" font-style="italic">coreferent</text>
  
  <!-- Model Response -->
  <rect x="320" y="100" width="200" height="100" fill="#d7f0d7" stroke="#2e8b57" stroke-width="2" rx="5" ry="5"/>
  <text x="420" y="125" font-family="Arial" font-size="16" text-anchor="middle" font-weight="bold">Model Response</text>
  <text x="420" y="155" font-family="Arial" font-size="12" text-anchor="middle" font-style="italic">&lt;reasoning&gt;</text>
  <text x="420" y="175" font-family="Arial" font-size="12" text-anchor="middle" font-style="italic">Step-by-step analysis...</text>
  <text x="420" y="195" font-family="Arial" font-size="12" text-anchor="middle" font-style="italic">&lt;answer&gt;Yes&lt;/answer&gt;</text>
  
  <!-- Reward Functions -->
  <rect x="150" y="250" width="600" height="280" fill="#f5f5f5" stroke="#666666" stroke-width="2" rx="5" ry="5"/>
  <text x="450" y="280" font-family="Arial" font-size="18" text-anchor="middle" font-weight="bold">Reward Functions</text>
  
  <!-- Correctness Reward -->
  <rect x="180" y="300" width="240" height="100" fill="#ffe6cc" stroke="#ff9900" stroke-width="2" rx="5" ry="5"/>
  <text x="300" y="325" font-family="Arial" font-size="14" text-anchor="middle" font-weight="bold">Correctness Reward (2.0)</text>
  <text x="300" y="345" font-family="Arial" font-size="12" text-anchor="middle">correctness_reward_func()</text>
  <text x="300" y="365" font-family="Arial" font-size="12" text-anchor="middle">Compares extracted answer</text>
  <text x="300" y="385" font-family="Arial" font-size="12" text-anchor="middle">with expected ("Yes")</text>
  
  <!-- Format Rewards -->
  <rect x="480" y="300" width="240" height="200" fill="#e0d7ff" stroke="#7b68ee" stroke-width="2" rx="5" ry="5"/>
  <text x="600" y="325" font-family="Arial" font-size="14" text-anchor="middle" font-weight="bold">Format Rewards (0.5)</text>
  
  <!-- Strict Format -->
  <rect x="500" y="345" width="200" height="60" fill="#d2c5fc" stroke="#6a5acd" stroke-width="1" rx="3" ry="3"/>
  <text x="600" y="365" font-family="Arial" font-size="12" text-anchor="middle">strict_format_reward_func()</text>
  <text x="600" y="385" font-family="Arial" font-size="12" text-anchor="middle">Exact pattern with newlines</text>
  
  <!-- Soft Format -->
  <rect x="500" y="415" width="200" height="60" fill="#d2c5fc" stroke="#6a5acd" stroke-width="1" rx="3" ry="3"/>
  <text x="600" y="435" font-family="Arial" font-size="12" text-anchor="middle">soft_format_reward_func()</text>
  <text x="600" y="455" font-family="Arial" font-size="12" text-anchor="middle">Relaxed pattern matching</text>
  
  <!-- XML Count -->
  <rect x="180" y="410" width="240" height="70" fill="#ffd9e6" stroke="#ff66b2" stroke-width="2" rx="5" ry="5"/>
  <text x="300" y="430" font-family="Arial" font-size="14" text-anchor="middle" font-weight="bold">XML Tag Counter (0.5)</text>
  <text x="300" y="450" font-family="Arial" font-size="12" text-anchor="middle">xmlcount_reward_func()</text>
  <text x="300" y="470" font-family="Arial" font-size="12" text-anchor="middle">0.125 per correct tag placement</text>
  
  <!-- Output -->
  <rect x="350" y="550" width="200" height="40" fill="#fffbd8" stroke="#e0b400" stroke-width="2" rx="5" ry="5"/>
  <text x="450" y="575" font-family="Arial" font-size="14" text-anchor="middle" font-weight="bold">Total Reward Score (0-3.0)</text>
  
  <!-- Arrows -->
  <!-- Input to Model Response -->
  <path d="M 250 150 L 320 150" stroke="#000000" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- Model Response to Reward Functions -->
  <path d="M 420 200 L 420 250" stroke="#000000" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- Reward Functions to Output -->
  <path d="M 450 530 L 450 550" stroke="#000000" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- Model Response to Correctness -->
  <path d="M 320 180 L 250 180 L 250 230 L 300 230 L 300 300" stroke="#000000" stroke-width="1.5" stroke-dasharray="5,3" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- Model Response to Format Rewards -->
  <path d="M 520 180 L 650 180 L 650 230 L 600 230 L 600 300" stroke="#000000" stroke-width="1.5" stroke-dasharray="5,3" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- Arrowhead marker -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#000000"/>
    </marker>
  </defs>
  

</svg>
